Starting pickle video player...
Setting up application context...
Setting up signal handlers...
app_init: Starting initialization...
Video file validation passed: h-6.mp4 (192386826 bytes)
app_init: Initializing DRM display...
No V4L2 hardware acceleration in FFmpeg
 V..... h263_v4l2m2m          (codec h263)
 V..... h264_v4l2m2m          (codec h264)
 V..... hevc_v4l2m2m          (codec hevc)
 V..... mpeg4_v4l2m2m         (codec mpeg4)
 V..... vp8_v4l2m2m           (codec vp8)
 V..... h263_v4l2m2m          (codec h263)
 V..... h264_v4l2m2m          (codec h264)
 V..... hevc_v4l2m2m          (codec hevc)
 V..... mpeg1_v4l2m2m         (codec mpeg1video)
 V..... mpeg2_v4l2m2m         (codec mpeg2video)
 V..... mpeg4_v4l2m2m         (codec mpeg4)
 V..... vc1_v4l2m2m           (codec vc1)
 V..... vp8_v4l2m2m           (codec vp8)
 V..... vp9_v4l2m2m           (codec vp9)
[h264_v4l2m2m @ 0x55a84ce290] Using device /dev/video10
[h264_v4l2m2m @ 0x55a84ce290] driver 'bcm2835-codec' on card 'bcm2835-codec-decode' in mplane mode
[h264_v4l2m2m @ 0x55a84ce290] requesting formats: output=H264/none capture=YU12/yuv420p
Successfully became DRM master
Using CRTC 100, Encoder 32, Connector 33
EGL version: 1.4
VSync enabled for smooth frame pacing
[HW_DECODE] Attempting hardware decoder detection...
[HW_DECODE] Codec ID: 27
[HW_DECODE] AV_CODEC_ID_H264 = 27, AV_CODEC_ID_HEVC = 173
[HW_DECODE] H.264 detected, searching for h264_v4l2m2m decoder...
[HW_DECODE] ‚úì Found h264_v4l2m2m hardware decoder
[HW_DECODE] H.264 profile: 100 (High)
[HW_DECODE] H.264 level: 42
[HW_DECODE] Resolution: 1920x1080
[HW_DECODE] Bitrate: 11001846 bps

===== V4L2 Hardware Decoder Capabilities =====
Potential hardware codec found: bcm2835-codec-decode (platform:bcm2835-codec):
Device path: /dev/video10
Device path: /dev/video11
Device path: /dev/video12
Device path: /dev/video18
Device path: /dev/video31
Potential hardware codec found: bcm2835-codec (vchiq:bcm2835-codec):
Device path: /dev/media3

Checking codec capabilities for /dev/media3:

Additional codec details:

FFmpeg hardware acceleration support:

FFmpeg V4L2 codecs:
===============================================

[HW_DECODE] BSF: Analyzing stream format...
[HW_DECODE] BSF: First 8 bytes of extradata: 01 64 00 2a ff e1 00 29 
[HW_DECODE] BSF: Detected avcC format (byte 0 = 0x01)
[HW_DECODE] BSF: Will convert avcC ‚Üí Annex-B for V4L2 M2M
[HW_DECODE] BSF: avcC NAL length size: 4 bytes
[HW_DECODE] BSF: Initializing h264_mp4toannexb bitstream filter...
[HW_DECODE] BSF: ‚úì Found h264_mp4toannexb filter
[HW_DECODE] BSF: ‚úì Allocated BSF context
[HW_DECODE] BSF: ‚úì Copied codec parameters to BSF
[HW_DECODE] BSF: ‚úì Initialized BSF successfully
[HW_DECODE] BSF: Converting extradata to Annex-B format...
[HW_DECODE] BSF: ‚úì Converted extradata (54 bytes)
[HW_DECODE] BSF: Set codec_tag=0 for Annex-B format
[HW_DECODE] BSF: ‚úì avcC ‚Üí Annex-B conversion ready
[HW_DECODE] V4L2: Configuring V4L2 M2M decoder for Raspberry Pi...
[HW_DECODE] V4L2: ‚úì Format negotiation callback registered
[HW_DECODE] V4L2: Set thread_count=1, thread_type=0 (V4L2 handles threading)
[HW_DECODE] V4L2: ‚úì LOW_DELAY and FAST flags enabled
[HW_DECODE] V4L2: ‚úì CHUNKS mode enabled (supports partial frames)
[HW_DECODE] V4L2: Set num_capture_buffers=32, num_output_buffers=16
[HW_DECODE] V4L2: ‚úì Forcing mmap mode (not PRIME/DRM)
[HW_DECODE] V4L2: Configuration complete
[HW_DECODE] V4L2: Note - decoder may buffer 20-30 packets before first frame
[HW_DECODE] V4L2: ‚úì Codec opened successfully with V4L2 options
Codec opened successfully
Decoder output format: yuv420p (0)
Color space: bt709, Color range: tv
Hardware decoding to YUV420P enabled, GPU will handle YUV‚ÜíRGB conversion
Video 1 dimensions: 1920x1080 (within limits)
Loaded saved keystone settings from pickle_keystone.conf
Terminal environment detected, using terminal input...
Using terminal input mode (press keys directly)
Controls: 1-4=select corner, arrows=move, s=save, r=reset, c=corners, b=border, h=help, q=quit
No gamepad detected (keyboard/terminal input only)
Starting main application loop...
App configuration - Loop: 0, Show timing: 0, Debug gamepad: 0
Video FPS: 60.00, Target frame time: 16.667ms
Frame 0: YUV pointers: Y=(nil) U=(nil) V=(nil)
Waiting for video data...
Setting display mode...
Display initialized. Video should appear now.
Attempting first frame decode...
video_decode_frame() starting...
[HW_DECODE] First decode: will send up to 50 packets before software fallback
[HW_DECODE] Note: V4L2 M2M may buffer 20-50 packets depending on video

‚úì‚úì‚úì SUCCESS! First frame decoded after 2 packets ‚úì‚úì‚úì
* Decoder: Hardware (V4L2 M2M)
* Frame format: yuv420p (0)
* Frame size: 1920x1080
* Picture type: ?
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

First frame decoded successfully
Frame 1: YUV pointers: Y=0x7fa7713000 U=0x7fa7911000 V=0x7fa7990800
YUV strides: Y=1920 U=960 V=960 (dimensions: 1920x1080, UV: 960x540)
Direct upload: Y=YES U=YES V=YES
GPU YUV‚ÜíRGB rendering started (1920x1080)
Quit requested
Quit requested by user
[?25h[0m
[CLEANUP] Drained 2 frames from V4L2 M2M decoder
Application cleanup complete

Restoring terminal state...

Terminal restored
